<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Elixir cli talk by bbense</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Elixir cli talk</h1>
        <p>Slides for brief talk about writing CLI applications with Elixir with sample application</p>
        <p class="view"><a href="https://github.com/bbense/elixir_cli_talk">View the Project on GitHub <small>bbense/elixir_cli_talk</small></a></p>
        <ul>
          <li><a href="https://github.com/bbense/elixir_cli_talk/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/bbense/elixir_cli_talk/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/bbense/elixir_cli_talk">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="writing-cli-applications-with-elixir" class="anchor" href="#writing-cli-applications-with-elixir" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing CLI Applications with Elixir</h1>

<ul>
<li><p><strong>How do you stop?</strong></p></li>
<li><p>The default exit value of the program is 0 if the main function returns successfully, and 127 if any errors
are encountered. However, you can set the exit status of the program using System.halt. <p>
  <pre>
    
  def cleanup({_options,_args}) do
    System.halt(0)
  end 

  </pre>

</p></li>
<li><p>Another useful strategy is to put the pid of the main program and any spawned processes in the options map. 
You can then notify spawned processes at exit and have them
send an all_done message to the main_pid. You can recieve these in your cleanup function to ensure that the program completes before the main process exits. 
  <pre>
    
  def cleanup({_options,_args}) do
    send options[:task_pid], { :finalize }
    receive do 
       { :all_done } -> System.halt(0)
    end 
  end 

  </pre>


</p></li>


</ul>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/bbense">bbense</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
